<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="./css/custom-style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&family=Outfit:wght@100..900&display=swap"
    />
    <title>Frontend Mentor | E-commerce product page</title>
  </head>
  <body class="d-flex">
    <div class="container m-0 mx-md-5 mx-lg-5 p-0 mw-100">
      <aside id="navigation-list-card" class="sidebar-nav z-3 collapsed">
        <button type="button" class="btn p-3 close-sidebar-nav">
          <i class="bi bi-x-lg"></i>
        </button>
        <ul class="p-2 navigation-list">
          <li class="p-2 collections item">Collections</li>
          <li class="p-2 men item">Men</li>
          <li class="p-2 women item">Women</li>
          <li class="p-2 about item">About</li>
          <li class="p-2 contact item">Contact</li>
        </ul>
      </aside>
      <main class="main z-n1 m-0 mx-md-5 mx-lg-5 w-100">
        <div class="container-fluid p-0 m-0">
          <div class="navbar navbar-reverse fixed-top px-md-5 px-lg-5">
            <button
              class="navbar-toggler p-2 d-block d-sm-none"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navigation-list-card"
              aria-expanded="false"
              aria-controls="navigation-list-card"
            >
              <strong><span class="navbar-toggler-icon"></span></strong>
            </button>
            <a class="navbar-brand p-2" href="#">
              <img src="./images/logo.svg" alt="sneakers company" />
            </a>
            <div
              class="navigation-list d-none d-sm-none d-md-flex d-lg-flex flex-md-fill flex-lg-fill"
            >
              <ul class="m-0 navigation-list d-md-flex flex-row align-content-center w-100">
                <li class="p-2 collections item">
                  <a href="#collections">Collections</a>
                </li>
                <li class="p-2 men item">
                  <a href="#men">Men</a>
                </li>
                <li class="p-2 women item">
                  <a href="#women">Women</a>
                </li>
                <li class="p-2 about item">
                  <a href="#about">About</a>
                </li>
                <li class="p-2 contact item">
                  <a href="#contact">Contact</a>
                </li>
              </ul>
            </div>
            <button type="button" class="basket btn" data-bs-toggle="button">
              <img
                src="./images/icon-cart.svg"
                alt="basket"
                class="img-fluid"
              />
              <span class="badge hidden" id="cart-counter">0</span>
            </button>
            <div class="profile-icon p-2">
              <img
                src="./images/image-avatar.png"
                alt="profile"
                class="img-fluid"
              />
            </div>
          </div>
          <section class="product d-md-inline-flex mt-0 mt-md-5 pt-md-5">
            <div
              id="product-images"
              class="product-images carousel slide align-content-center"
            >
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img
                    src="./images/image-product-1.jpg"
                    alt="sneakers-1"
                    class="d-block w-100"
                  />
                </div>
                <div class="carousel-item">
                  <img
                    src="./images/image-product-2.jpg"
                    alt="sneakers-2"
                    class="d-block w-100"
                  />
                </div>
                <div class="carousel-item">
                  <img
                    src="./images/image-product-3.jpg"
                    alt="sneakers-3"
                    class="d-block w-100"
                  />
                </div>
                <div class="carousel-item">
                  <img
                    src="./images/image-product-4.jpg"
                    alt="sneakers-4"
                    class="d-block w-100"
                  />
                </div>
              </div>
              <div
                class="carousel-indicators d-none d-md-flex align-content-between rounded"
              >
                <button
                  id="carousel-button-1"
                  type="button"
                  data-bs-target="#product-images"
                  data-bs-slide-to="0"
                  aria-current="true"
                  aria-label="Slide 1"
                  class="active"
                >
                  <img
                    src="./images/image-product-1-thumbnail.jpg"
                    alt="sneakers-1"
                    class="d-block w-100"
                  />
                </button>
                <button
                  id="carousel-button-2"
                  type="button"
                  data-bs-target="#product-images"
                  data-bs-slide-to="1"
                  aria-label="Slide 2"
                  class="rounded-3"
                >
                  <img
                    src="./images/image-product-2-thumbnail.jpg"
                    alt="sneakers-2 rounded-3"
                    class="d-block w-100"
                  />
                </button>
                <button
                  id="carousel-button-3"
                  type="button"
                  data-bs-target="#product-images"
                  data-bs-slide-to="2"
                  aria-label="Slide 3"
                  class="rounded-3"
                >
                  <img
                    src="./images/image-product-3-thumbnail.jpg"
                    alt="sneakers-3"
                    class="d-block w-100"
                  />
                </button>
                <button
                  id="carousel-button-4"
                  type="button"
                  data-bs-target="#product-images"
                  data-bs-slide-to="3"
                  aria-label="Slide 4"
                  class="rounded-3"
                >
                  <img
                    src="./images/image-product-4-thumbnail.jpg"
                    alt="sneakers-4"
                    class="d-block w-100"
                  />
                </button>
              </div>

              <div class="carousel-controls d-sm-none">
                <a
                  class="left carousel-control-prev"
                  href="#product-images"
                  role="button"
                  data-slide="prev"
                  onclick="$('.product-images').carousel('prev'); return false;"
                >
                  <span
                    class="carousel-control-prev-icon"
                    aria-hidden="true"
                  ></span>
                </a>
                <a
                  class="right carousel-control-next"
                  href="#product-images"
                  role="button"
                  data-slide="next"
                  onclick="$('.product-images').carousel('next'); return false;"
                >
                  <span
                    class="carousel-control-next-icon"
                    aria-hidden="true"
                  ></span>
                </a>
              </div>
            </div>
            <div
              class="product-details d-md-flex flex-md-column m-md-5 p-3 p-md-5"
            >
              <div class="product-brand">Sneaker Company</div>
              <div class="product-name pt-2 pb-3">
                Fall Limited Edition Sneakers
              </div>
              <div class="product-description pb-3">
                These low-profile sneakers are your perfect casual wear
                companion. Featuring a durable rubber outer sole, theyâ€™ll
                withstand everything the weather can offer.
              </div>
              <div class="product-price d-flex flex-md-row flex-lg-row">
                <div class="product-price--current">$125.00</div>
                <div class="product-price--promo">
                  <span>50%</span>
                </div>
                <div class="ms-auto product-price--original">$250.00</div>
              </div>
              <div
                class="add-to-cart-container flex-column flex-wrap gap-md-2 d-md-flex flex-md-row flex-md-nowrap d-lg-flex flex-lg-row flex-lg-nowrap mt-md-4 mt-lg-4"
              >
                <div class="basket-calculator d-flex flex-row flex-nowrap my-3 my-md-0 my-lg-0">
                  <button
                    class="border-0 px-3 py-1 text-center symbols minus-sign"
                  >
                    -
                  </button>
                  <span class="px-3 py-1 flex-grow-1 text-center quantity"
                    >0</span
                  >
                  <button
                    class="border-0 px-3 py-1 text-center symbols plus-sign"
                  >
                    +
                  </button>
                </div>
                <button class="px-3 py-2 rounded w-100 add-to-cart ml-md-2 ml-lg-2">
                  <span class="add-to-cart--icon"
                    ><img src="./images/icon-cart.svg"
                  /></span>
                  <span class="add-to-cart--label">Add to Cart</span>
                </button>
              </div>
              <div class="mobile-margin visible-xs"></div>
            </div>
          </section>
        </div>
      </main>
    </div>
    <div class="modal basket-modal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
          <div class="modal-header">
            Cart
          </div>
          <div class="modal-body">
            <div class="basket-content basket-content-filled d-flex flex-row flex-nowrap">
              <div class="product-image-icon align-self-center w-25">
                <img 
                  src="./images/image-product-2-thumbnail.jpg"
                  alt="sneakers-2 rounded-3"
                  class="d-block w-100">
              </div>
              <div class="flex-column w-75 flex-wrap px-3">
                  <div class="cart-text">
                      Fall Limited Edition Sneakers
                  </div>
                  <div class="product-total cart-text ">
                      $<span class="cart-product-price">125.00</span> x 
                      <span class="cart-quantity"></span> 
                      <span class="fw-bold">$</span><span class="fw-bold total-cart-amount"></span>
                  </div>
              </div>
            </div>
          </div>
          <div class="modal-body">
            <div class=" d-flex flex-column basket-content basket-content-empty ">
              <div class="cart-text p-5 align-self-center">
                Your Cart is empty.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal lightbox-modal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-body align-self-center">
            <div id="lightbox" class="lightbox"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="./js/jquery-3.7.1.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/bootstrap.bundle.min.js"></script>
  </body>
</html>
<script>

  let closeSideBarToggleButton = document.querySelector(".close-sidebar-nav");
  let navbarToggleButton = document.querySelector(".navbar-toggler");
  let sidebarContainer = document.querySelector(".sidebar-nav");

  function toggleSideBar() {
    sidebarContainer.classList.toggle("open");
  }
  closeSideBarToggleButton.addEventListener("click", function () {
    toggleSideBar();
  });

  navbarToggleButton.addEventListener("click", function () {
    toggleSideBar();
  });

  /**
   * This section is for the quantity field
   **/

  let plus_button = document.querySelector(".plus-sign");
  let minus_button = document.querySelector(".minus-sign");
  let quantity_field = document.querySelector(".quantity");

  plus_button.addEventListener("click", function () {
    let current_value = quantity_field.innerHTML;
    let new_value = parseFloat(current_value) + 1;
    quantity_field.innerHTML = new_value;
  });

  minus_button.addEventListener("click", function () {
    let current_value = quantity_field.innerHTML;
    let new_value = parseFloat(current_value) - 1;
    if (current_value > 0) {
      quantity_field.innerHTML = new_value;
    } else {
      quantity_field.innerHTML = current_value;
    }
  });

  /**
   * This section is for displaying the badge on the cart and the computation on the basket modal
   ***/

  let cart_counter = document.querySelector(".badge");
  let add_button = document.querySelector(".add-to-cart");
  let basket_button = document.querySelector(".basket");
  let basket_empty = document.querySelector('.basket-content-empty');
  let basket_filled = document.querySelector('.basket-content-filled');

  let cart_quantity = document.querySelector(".cart-quantity");
  let cart_price = document.querySelector('.cart-product-price');
  let total_cart_amount = document.querySelector('.total-cart-amount');
  
  let cart_modal = new bootstrap.Modal(
    document.querySelector(".basket-modal")
  );

  add_button.addEventListener("click", function () {
    let current_quantity = parseFloat(quantity_field.innerHTML);
    let current_price   = parseFloat(cart_price.innerHTML);
    let total           = current_quantity * current_price;
    if (current_quantity > 0) {
        cart_counter.innerHTML = current_quantity;
        cart_counter.classList.remove("hidden");
        
        cart_quantity.innerHTML = current_quantity;
        

        total_cart_amount.innerHTML = parseFloat(total).toFixed(2);
    } else {
        cart_counter.classList.add("hidden");
    }
  });

  let checkIfEmpty = () => {
    let current_quantity = parseFloat(quantity_field.innerHTML);
    if(current_quantity > 0) {
      basket_empty.closest('.modal-body').classList.add('hidden');
      basket_filled.closest('.modal-body').classList.remove('hidden');
    } else {
      basket_empty.closest('.modal-body').classList.remove('hidden');
      basket_filled.closest('.modal-body').classList.add('hidden');
    }
  }

  basket_button.addEventListener("click", function() {
    checkIfEmpty();
    cart_modal.show();
  });

  /**
   * For displaying the images on the lightbox
   **/
  let product_image_box = document.querySelector(".product-images");
  let lightbox_modal = new bootstrap.Modal(
    document.querySelector(".lightbox-modal")
  );
  let lightbox = document.querySelector(".lightbox");

  product_image_box.addEventListener("click", function () {
    let products      = document.querySelector(".product div:first-child");
    lightbox.innerHTML = "";
    lightbox.innerHTML = products.outerHTML;
    
    let carousel_control = document.querySelector("#lightbox .carousel-controls");
    carousel_control.classList.remove('d-sm-none');
    lightbox_modal.show();
  });
</script>
